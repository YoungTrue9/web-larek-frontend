# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Описание

#### Web-larёk - удобный мини-интернет магазин в котором можно просмотреть каталог товаров. Можно совершать заказы и управлять своими покупками. Проект построен на базе передовых технологий. TypeScript, HTML,SCSS. Использоваться Webpack , чтобы обеспечить
вам отличный пользовательский опыт.

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Cхема проекта
При переходе по ссылки : https://drive.google.com/file/d/1iTYSfZzsEdM217wgPc_qx8JMDnFhwxUD/view
Нужно нажать на кнопку 'Открыть в приложение "draw.io"'. После этого откроется сайт с UML схемой проекта.


## Описание классов



### Класс Model<T>
Абстрактный класс дженерик, конструктор, метод привязки события.
#### Конструктор:
- принимает на вход IEvent (обьект события) и обьект данных.
- проихводит соеденение обьектов.
#### методы:
- emmitChanges - регестрирует входящее событие в EventEmitter



### Класс Component<T>
Абстрактный класс дженерик, работает с конструктор и с компонентами отображения для сайта.
#### Конструктор:
- принимает на вхождение container с типом HTMLElement
#### Методы:
- ```toggleClass``` -- метод переключения класса элемента
- ```setDisabled``` -- метод нужный для блокировки кнопки
- ```render``` -- метод соеденения дынных для отрисовки элементов
- ```setImage``` -- метод для инициализации изображения и описания
- ```setText``` -- метод для инициализации текста элементов



### Класс ```EventEmitter```
Класс ```EventEmitter``` занимется работай событий. Можно устанавливать и снимать прослушивания события. 



### Класс ```Api```
Хранит главные основные методы и поля для работы с сервером.
Хранит ```baseUrl```, ```options```
```baseUrl``` -- ссылка (url)
```options``` -- запрос
Производит обработку запроса и получение данных.


### Model - компоненты
Класс ```LarekApi```
Главный класс работующий в проекте, расширение ```Api```.

#### Конструктор: 
- передает ```Api``` поля ```baseUrl```,```options``` в родительский конструктор.
- сохраняет входящий ```url``` запроса в ```cdn```

#### Поля 
- ```cdn``` хранит в себе ```url``` запроса

#### Методы
- ```getProductList``` -- метод для получения списка товаров с сервера
- ```orderProducts``` -- метод для отправки данных заказов на сервер


### Класс ```ApiState```
Данный класс нужен для того чтобы содержать в себе данные страницы и методы.
Это состояние приложения: каталог, превью, форма заканов, корзина.
Расширяется базовый абстрактным классом ```Model<T>``` через интерфейс ```IAppState```.
```
export interface IAppState {
  loading: boolean;
  catalog: IProductItem[];
  preview: string;
  order: IOrder;
  basket: string[];
  total: string | number;
}
```

#### Поля 
- loading -- поле для загрузки
- catalog -- поле для данных списка товаров которые инициализированны с сервера
- preview -- поле для данных товаров которые мы видим на экране
- order -- поле для данных заказа, которые инициализируются на сервер
- basket --  поле для товаров которые мы добавили в корзину
- total -- сумма на которую выходят товары
  
#### Методы
- ```setCatalog``` -- установка данных в каталог
- ```setPreview``` -- установка данных на экран
- ```clearBasket``` -- очистка данных корзины
- ```addToOrder``` -- добавление товара в корзину
- ```setProductToBasket``` -- установка данных в корзину
- ```removeFromOrder``` -- удаление товара из заказа
- ```removeProductToBasket``` -- удаление товара из корзины
- ```setContactField``` -- установка поля контактов
- ```setOrderField``` -- установка поля заказа
- ```validateContact``` -- проверка валидации данных контакта
- ```validateOrder``` -- проводим валидацию данных заказа
- ```set total``` -- установка суммы товара в корзине
- ```get statusBasket``` -- получение статуса корзины
- ```get bskt``` -- получение данных товаров в корзине
- ```get Total``` --получение сумарной суммы товаров в корзине




 ### Класс ```ProductsItem```
Класс в котором происходит хранение данных. 
Заголовок, описание, категория, изображение, цена.
```Model<T>``` по интерфейсу ```IProductItem```
```
export interface IProductsItem {
  id: string;
  title: string;
  description: string;
  category: string;
  image: string;
  price: number | null;
}
```

## View - компонент представления

### Класс ```Card```
Данный класс нужен для вывода данных карточек товара на экране
```Component<T>``` по интерфейсу ```ICard```

```
interface ICard {
  title: string;
  category: string;
  image: string;
  price: number;
  text: string;
}
```
#### Конструктор: 
- принимает ```container```,```actions```
- передает container в контейнер родителя
- сохраняет элементы разметки
- если обьект ```actions``` был передан, то создаем слушать клика и вешаем его на ```container``` в котором вызываем событие ```actions```
```
interface ICardActions {
  onClick: (event: MouseEvent) => void;
}
```

#### Поля 
- ```title``` -- хранение разметки заголовка карточки
- ```category``` -- хранение разметки категории карточки
- ```image``` -- хранение разметки изображения карточки
- ```categoryColor``` -- модификатор словоря для изменения содержимого

  
#### Методы
- ```set title``` -- установка содержимого заголовка
- ```set category``` -- установка содержимого категории
- ```set image``` -- установка содержимого изображения
- ```set price``` -- установка содержимого цены
  



### Класс ```CardPreview```

Данный класс нужен для отображения карточек на экране (превью)
Расширение класса Card<T> по интерфейсу ICardPreview

```
interface ICardPreview {
  text: string;
}
```

#### Конструктор
- принимает ```container``` с типом ```HTMLElement``` и ```actions``` c типом ```ICardActions```
```
interface ICardActions {
  onClick: (event: MouseEvent) => void;
}
```
- передает ```container``` и ```actions``` в родительский конструктор, затем сохраняет необходимые элементы разметок в полях
- если с ```actions``` все хорошо и был передан, то вешаем прослушку события клика на ```button``` и вызываем в нем ```actions```. Сам ```container``` удаляется

#### Поля 
- ```text``` - хранит разметку в описании (превью)
- ```button``` - хранит разметку кнопки (превью)

#### Методы
- ```set text``` - установка содержимого описания (превью)




### Класс ```CardBaskets```
Данный класс нужен для отображения карточек товаров в каталоге.
Расширение базовым абстрактным классом ```Component<T>``` по интерфейсу ```ICardBaskets```
```
interface ICardBaskets {
  title: string;
  price: number;
  index: number;
}
```

#### Конструктор
- принимает ```container``` с типом ```HTMLElement``` и обьект события ```actions``` с типом  ```ICardActions```
```
interface ICardActions {
  onClick: (event: MouseEvent) => void;
}
```
- передает ```container``` в родительский контейнер, сохраняет разметку в полях
- если ```actions``` был передан, то вешаем прослушку события клика на ```button``` c вызовом обьекта ```actions```. Сам ```container``` удаляется


#### Поля 
- ```title``` --хранит разметку заголовка
- ```price``` --хранит разметку цены
- ```button``` --хранит разметку кнопки удаления
- ```index``` --хранит разметку порядкого номера


#### Методы
- ```set title``` --установка заголовка
- ```set price``` --установка порядкого номера
- ```set index``` --установка цены




### Класс ```Page```
Данный класс нужен для отображениях данных элементов страницы. 
(Каталог, корзина, счетчик товаров в корзине)

Расширяется базовым абстрактным классом ```Component<T>``` по интерфейсу ```IPage```

```
interface IPage {
  catalog: HTMLElement[]
}
```

#### Конструктор
- принимает ```container``` типа ```HTMLElement``` и обьект ```event``` с типом ```IEvent```, передает ```container``` в родительский конструктор.
- сохранение необходимых элементов в разметки поля.
- на кнопку корзины ```basket``` вешаем слушатель события ```click```. 



#### Поля 
- ```counter``` --хранит счет товаров которые находятся в корзине
- ```catalog``` --хранит разметку каталог товаров
- ```wrapper``` --хранит разметку страницы
- ```basket``` --хранит разметку кнопку корзины


#### Методы
- ```set counter``` --установка значения в счетчике товаров корзины
- ```set catalog``` --установка каталога
- ```set locked``` --установка класса для прокрутки страницы (блокировка)




### Класс ```Modal```
Данный класс нужен для отображения модального окна.
Здесь нету практически полей, это контейнер в котором будут выводится окна.

Расширяется базовым абстрактным классом ```Component<T>``` по интерфейсу ```IModalData```

```
interface IModalData {
  content: HTMLElement;
}
```

#### Конструктор
- принимает ```container``` с типом ```HTMLElement``` и обьект ```event```  с типом ```IEvent```, передает ```container``` в родительский конструктор, сохраняет информацию в полях.
- вешаем слушатель click на кнопку ```closeButton```. Затем ```container``` с методом закрытия ```close```
- вешаем слушатель ```click``` на ```content```, для остановки события при клике на модальное окно. (закрытие окна)


#### Поля 
- ```closeButton``` --разметка для кнопки закрытия модального окна
- ```content``` --разметка для конейтнера с контентом модального окна


#### Методы
- ```set content``` --установка контента модального окна
- ```open``` --открытие модального окна
- ```close``` --закрытие модального окна
- ```render``` --отрисовка контента для модального окна



### Класс ```Basket```
Данный класс нужен для того чтобы корзина отображалась в модальном окне. Это является контеном для модального окна.
Расширяется базовым абстрактным классом ```Component<T>``` по интерфейсу ```IBasket```

```
interface IBasket {
  items: HTMLElement[];
  total: number;
}
```

#### Конструктор
- принимает ```container``` с типом ```HTMLElement``` и обьект ```actions``` с типом ```IEvent```
- передает ```container``` в родительский конструктор, сохраняет необходимые элементы разметки в полях
- Если мы имеем ```button``` то вешаем на него ```click``` прослушку события, и при этом регистрацией события 


#### Поля 
- ```button``` --хранит разметку кнопки (оформления заказа)
- ```list ``` --хранит разметку списка товаров
- ```total``` --хранит разметку суммы товаров
- ```items``` --хранит список товаров в корзине


#### Методы
- ```set items``` --устанавливает товары в разметку ```list```
- ```set total``` --устанавливает значение суммы товара (стоимость)




### Класс ```Order```
Данный класс нужен для заказа в модальном окне.

Расширяется классом ```Form<T>``` по интерфейсу ```IOrderForm```

```
export interface IOrderForm {
  payment?: string;
  address?: string;
  phone?: string;
  email?: string;
  total?: string | number;
}
```


#### Конструктор
- принимает ```container``` типа ```HTMLElement``` и объект ```event``` c типом ```IEvent```. Передает ```container```, ```event``` в родительский конструктор. Сохроняет элементы в полях
- на кнопку оплаты вешаем слушатель ```click``` по методу ```payment``` и ставим класс активности на кнопку


#### Поля 
- ```buttons ``` --хранит разметку кнопок формы оплаты


#### Методы
- ```set payment``` --устанавливает класс активности на кнопку (active)
- ```set total``` --устанавливает значение поля адрес




### Класс ```Contacts```
Данный класс нужен для заказа товара, вывод контакта

Расширяется классом ```Form<T>``` по интерфейсу ```IOrderForm```


#### Конструктор
- принимает ```container``` типа ```HTMLElement``` и объект ```event``` c типом ```IEvent```. Передает ```container```, ```event``` в родительский конструктор. Сохроняет элементы в полях


#### Методы
- ```set phone``` --устанавливает значение поля телефона
- ```set email``` --устанавливает значение поля почты




### Класс ```Form<T>```
Данный класс нужен для валидации формы.

Расширяется классом ```Component<T>``` по интерфейсу ```IFormStates```

```
interface IFormStates {
  valid: boolean;
  errors: string[];
}
```


#### Конструктор
- принимает ```container``` типа ```HTMLElement``` и объект ```event``` c типом ```IEvent```. Передает ```container```, ```event``` в родительский конструктор. Сохроняет элементы в полях
- вешает на ```container``` слушатель ```input``` при котором, его имя со значением отправляются методу класса ```onInputChange```
- вешаем на ```container``` слушатель ```submit``` при котором происходит регистрация с указанием имени ```container```

#### Поля 
- ```submit``` --хранит разметку кнопки отправки формы
- ```errors``` — хранит разметку вывода ошибок валидации

#### Методы
- ```onInputChange``` --регистрирует событие с именем конкретного поля
- ```set valid``` --метод установки валидности
- ```set errors``` --метод установки ошибки
- ```render``` --отрисовка формы и ее элементов




### Класс ```Success```
Данный класс нужен для вывода сообщения об успешном оформление заказа в модальном окне. (контент для модального окна)

Расширяется классом ```Component<T>``` по интерфейсу ```ISuccess```

```
interface ISuccess {
  total: number;
}
```


#### Конструктор
- принимает ```container``` типа ```HTMLElement``` и объект ```actions``` c типом ```ISuccessActions```. 

```
interface ISuccessActions {
  onClick: () => void;
}
```

- передает ```container``` в родительский конструктор, сохраняет необходимые элементы разметки в полях
- обьект ```actions``` был передан, то вешаем слушатель клика на ```close``` с вызовом события ```actions```


#### Поля 
- ```total``` --разметка общей суммы товаров в заказе
- ```errors``` --разметка кнопки закрытия окна


#### Методы
- ```set total``` --установка значения общей суммы
